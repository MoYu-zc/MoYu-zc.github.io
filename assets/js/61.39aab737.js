(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{481:function(t,_,a){"use strict";a.r(_);var v=a(15),s=Object(v.a)({},(function(){var t=this,_=t.$createElement,a=t._self._c||_;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"消息中间件rabbitmq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消息中间件rabbitmq"}},[t._v("#")]),t._v(" 消息中间件RabbitMQ")]),t._v(" "),a("h2",{attrs:{id:"_1-什么是消息中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是消息中间件"}},[t._v("#")]),t._v(" 1.什么是消息中间件")]),t._v(" "),a("blockquote",[a("p",[t._v("MQ全称为Message Queue，消息队列是应用程序和应用程序之间的通信方法。")])]),t._v(" "),a("blockquote",[a("p",[t._v("为什么使用MQ？")]),t._v(" "),a("p",[t._v("在项目中，可将一些无需即时返回且耗时的操作提取出来，进行"),a("strong",[t._v("异步处理")]),t._v("，而这种异步处理的方式大大的节省了服务器的请求响应时间，从而"),a("strong",[t._v("提高")]),t._v("了"),a("strong",[t._v("系统")]),t._v("的"),a("strong",[t._v("吞吐量")])])]),t._v(" "),a("h2",{attrs:{id:"_2-应用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-应用场景"}},[t._v("#")]),t._v(" 2.应用场景")]),t._v(" "),a("h4",{attrs:{id:"_2-1-任务异步处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-任务异步处理"}},[t._v("#")]),t._v(" 2.1 任务"),a("strong",[t._v("异步")]),t._v("处理")]),t._v(" "),a("blockquote",[a("p",[t._v("将不需要同步处理的并且耗时长的操作由消息队列通知消息接收方进行异步处理。提高了应用程序的响应时间。")])]),t._v(" "),a("h4",{attrs:{id:"_2-2-应用程序解耦合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-应用程序解耦合"}},[t._v("#")]),t._v(" 2.2 应用程序解耦合")]),t._v(" "),a("blockquote",[a("p",[t._v("MQ相当于一个中介，通过它让生产者与消费者交互，将应用程序进行解耦合。")])]),t._v(" "),a("h4",{attrs:{id:"_2-3-削峰填谷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-削峰填谷"}},[t._v("#")]),t._v(" 2.3 削峰填谷")]),t._v(" "),a("p",[t._v("如某个系统会往数据库写数据，但是数据库只能支撑每秒"),a("strong",[t._v("1000")]),t._v("左右的并发写入，并发量再高就容易宕机。")]),t._v(" "),a("p",[t._v("在系统低峰期的时候并发也就"),a("strong",[t._v("100")]),t._v("多个，但在高峰期时候，并发量会突然激增到5000以上，这个时候数据库肯定会卡死。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210510001323.png",alt:"1"}})]),t._v(" "),a("p",[t._v("这时候，可以使用MQ，消息会被MQ保存起来，然后系统就可以按照自己的消费能力来消费，比如每秒"),a("strong",[t._v("1000")]),t._v("个数据，慢慢写入数据库，就不会卡死数据库了。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210510001531.png",alt:"2"}})]),t._v(" "),a("p",[t._v("但使用了MQ之后，限制消费消息的速度为"),a("strong",[t._v("1000")]),t._v("，但是这样一来，高峰期产生的数据势必会被积压在MQ中，"),a("strong",[t._v("高峰就被“削”掉了。")])]),t._v(" "),a("p",[t._v("但是因为消息积压，在高峰期过后的一段时间内，消费消息的速度还是会维持在"),a("strong",[t._v("1000QPS")]),t._v("，直到消费完积压的消息,这就叫做**“填谷”**")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210510001626.png",alt:"3"}})]),t._v(" "),a("h2",{attrs:{id:"_3-amqp-和-jms"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-amqp-和-jms"}},[t._v("#")]),t._v(" 3. AMQP 和 JMS")]),t._v(" "),a("blockquote",[a("p",[t._v("MQ是消息通信的模型；实现MQ的大致有两种主流方式："),a("strong",[t._v("AMQP、JMS。")])])]),t._v(" "),a("h3",{attrs:{id:"_3-1-amqp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-amqp"}},[t._v("#")]),t._v(" 3.1 AMQP")]),t._v(" "),a("p",[a("strong",[t._v("AMQP")]),t._v(" 是一种协议，更准确的说是一种 binary wire-level protocol（链接协议）。与 "),a("strong",[t._v("JMS")]),t._v(" 的本质差别 ： "),a("strong",[t._v("AMQP不从API层进行限定，而是直接定义网络交换的数据格式。")])]),t._v(" "),a("h3",{attrs:{id:"_3-2-jms"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-jms"}},[t._v("#")]),t._v(" 3.2 JMS")]),t._v(" "),a("p",[a("strong",[t._v("JMS")]),t._v(" 即Java消息服务（JavaMessage Service）应用程序接口，是一个Java平台中关于面向消息中间件（MOM）的API，用于在两个应用程序之间，或分布式系统中发送消息，进行"),a("strong",[t._v("异步通信")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"_3-3-amqp-与-jms-区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-amqp-与-jms-区别"}},[t._v("#")]),t._v(" 3.3 AMQP 与 JMS 区别")]),t._v(" "),a("ul",[a("li",[t._v("JMS 是定义了统一的接口，来对消息操作进行统一；  AMQP是通过规定协议来统一数据交互的格式")]),t._v(" "),a("li",[t._v("JMS 限定了必须使用Java语言；  AMQP只是协议，不规定实现方式，因此是跨语言的。")]),t._v(" "),a("li",[t._v("JMS 规定了两种消息模式；  AMQP的消息模式更加丰富")])]),t._v(" "),a("h2",{attrs:{id:"_4-多种消息中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-多种消息中间件"}},[t._v("#")]),t._v(" 4.多种消息中间件")]),t._v(" "),a("p",[t._v("常见的消息队列有如下：")]),t._v(" "),a("ul",[a("li",[t._v("ActiveMQ：基于 JMS")]),t._v(" "),a("li",[t._v("ZeroMQ：基于 C 语言开发")]),t._v(" "),a("li",[t._v("RabbitMQ：基于 AMQP 协议，erlang 语言开发，稳定性好")]),t._v(" "),a("li",[t._v("RocketMQ：基于 JMS，阿里巴巴产品")]),t._v(" "),a("li",[t._v("Kafka：类似MQ的产品；分布式消息系统，高吞吐量")])]),t._v(" "),a("blockquote",[a("p",[t._v("RabbitMQ是由erlang语言开发，基于AMQP（Advanced Message Queue 高级消息队列协议）协议实现的消息队列，它是一种应用程序之间的通信方法，消息队列在分布式系统开发中应用非常广泛。")]),t._v(" "),a("p",[t._v("RabbitMQ官方地址：http://www.rabbitmq.com/")])]),t._v(" "),a("blockquote",[a("p",[t._v("RabbitMQ提供了6种模式：")]),t._v(" "),a("ul",[a("li",[t._v("简单模式")]),t._v(" "),a("li",[t._v("work模式")]),t._v(" "),a("li",[t._v("Publish/Subscribe  发布与订阅模式")]),t._v(" "),a("li",[t._v("Routing 路由模式")]),t._v(" "),a("li",[t._v("Topics 主题模式")]),t._v(" "),a("li",[t._v("RPC  远程调用模式；")])]),t._v(" "),a("p",[t._v("官网对应模式介绍：https://www.rabbitmq.com/getstarted.html")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210510002714.png",alt:"4"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210510002715.png",alt:"5"}})])])}),[],!1,null,null,null);_.default=s.exports}}]);