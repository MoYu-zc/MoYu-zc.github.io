(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{460:function(t,e,a){"use strict";a.r(e);var r=a(15),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"dubbo-zookeeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-zookeeper"}},[t._v("#")]),t._v(" Dubbo+Zookeeper")]),t._v(" "),a("h2",{attrs:{id:"_1-dubbo概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-dubbo概念"}},[t._v("#")]),t._v(" 1.Dubbo概念")]),t._v(" "),a("p",[t._v("Apache Dubbo (incubating) |ˈdʌbəʊ| 是一款高性能、轻量级的开源Java RPC框架，它提供了六大核心能力：面向接口代理的高性能RPC调用，智能容错和负载均衡，服务自动注册和发现，高度可扩展能力，运行期流量调度，可视化的服务治理与运维。")]),t._v(" "),a("p",[t._v("官网：http://dubbo.apache.org/")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320103202.png",alt:"1"}}),t._v(" "),a("ul",[a("li",[a("strong",[t._v("服务提供者（Provider）")]),t._v("：暴露服务的服务提供方，服务提供者在启动时，向注册中心注册自己提供的服务。")]),t._v(" "),a("li",[a("strong",[t._v("服务消费者（Consumer）")]),t._v("：调用远程服务的服务消费方，服务消费者在启动时，向注册中心订阅自己所需的服务，服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。")]),t._v(" "),a("li",[a("strong",[t._v("注册中心（Registry）")]),t._v("：注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者")]),t._v(" "),a("li",[a("strong",[t._v("监控中心（Monitor）")]),t._v("：服务消费者和提供者，在内存中累计调用X数和调用时间，定时每分钟发送一次统计数据到监控中心")])]),t._v(" "),a("h4",{attrs:{id:"调用关系说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调用关系说明"}},[t._v("#")]),t._v(" 调用关系说明")]),t._v(" "),a("ul",[a("li",[t._v("服务容器负责启动，加载，运行服务提供者。")]),t._v(" "),a("li",[t._v("服务提供者在启动时，向注册中心注册自己提供的服务1服务消费者在启动时，向注册中心订阅自己所需的服务")]),t._v(" "),a("li",[t._v("注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。")]),t._v(" "),a("li",[t._v("服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。")]),t._v(" "),a("li",[t._v("服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。")])]),t._v(" "),a("h2",{attrs:{id:"_2-dubbo环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-dubbo环境搭建"}},[t._v("#")]),t._v(" 2.Dubbo环境搭建")]),t._v(" "),a("p",[a("strong",[t._v("这里我们可以使用"),a("a",{attrs:{href:"https://zookeeper.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Zookeeper注册中心"),a("OutboundLink")],1)])]),t._v(" "),a("h4",{attrs:{id:"_2-1-安装zookeeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装zookeeper"}},[t._v("#")]),t._v(" 2.1 安装Zookeeper")]),t._v(" "),a("p",[t._v("下载地址：http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.6.2/")]),t._v(" "),a("blockquote",[a("p",[t._v("zookeeper 从 3.5 版本以后，命名就发生了改变")]),t._v(" "),a("p",[t._v("如果是 apache-zookeeper-3."),a("em",[t._v(".")]),t._v(".tar.gz 这般命名的，都是未编译的")]),t._v(" "),a("p",[t._v("而 apache-zookeeper-3."),a("em",[t._v(".")]),t._v("-bin.tar.gz 这般命名的，才是已编译的包")])]),t._v(" "),a("p",[a("strong",[t._v("进入之后下载压缩包即可：")])]),t._v(" "),a("img",{staticStyle:{zoom:"90%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320120545.png",alt:"2"}}),t._v(" "),a("p",[a("strong",[t._v("下载好解压：")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320120722.png",alt:"3"}}),t._v(" "),a("p",[t._v("bin文件夹中有 "),a("strong",[t._v("zkServer.cmd")]),t._v("，双击启动：")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320111740.png",alt:"4"}}),t._v(" "),a("h4",{attrs:{id:"_2-2-遇到问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-遇到问题"}},[t._v("#")]),t._v(" 2.2 遇到问题")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("找不到或无法加载主类 org.apache.zookeeper.server.quorum.QuorumPeerMain")])])]),t._v(" "),a("p",[a("strong",[t._v("原因分析：")])]),t._v(" "),a("p",[t._v("zookeeper 从 3.5 版本以后，命名就发生了改变")]),t._v(" "),a("p",[t._v("如果是 apache-zookeeper-*.tar.gz 这般命名的，都是未编译的")]),t._v(" "),a("p",[t._v("而 apache-zookeeper-*-bin.tar.gz 这般命名的，才是已编译的包")]),t._v(" "),a("p",[a("strong",[t._v("解决方案：")]),t._v("\n重新下载 apache-zookeeper-3."),a("em",[t._v(".")]),t._v("-bin.tar.gz 包，然后解压使用。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("闪退问题")])])]),t._v(" "),a("p",[t._v("第一次使用的话，可能会遇到"),a("strong",[t._v("闪退")]),t._v("的问题：")]),t._v(" "),a("p",[a("strong",[t._v("解决方法：")])]),t._v(" "),a("p",[t._v("编辑该文件，在 "),a("strong",[t._v("endlocal")]),t._v(" 上面一行加入 "),a("strong",[t._v("pause")])]),t._v(" "),a("p",[t._v("该语句会使程序运行到这个地方停止，等待你的操作")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320112210.png",alt:"5"}}),t._v(" "),a("p",[t._v("双击打开：")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320121107.png",alt:"6"}}),t._v(" "),a("p",[a("strong",[t._v("原因分析：")])]),t._v(" "),a("p",[t._v("解压的文件夹根目录下，有一个"),a("strong",[t._v("conf文件夹")]),t._v("，中间没有"),a("strong",[t._v("zoo.cfg")])]),t._v(" "),a("p",[a("strong",[t._v("解决方案：")]),t._v("\n将文件中原有的"),a("strong",[t._v("zoo_sample.cfg")]),t._v("复制一下，改名为"),a("strong",[t._v("zoo.cfg")])]),t._v(" "),a("p",[a("strong",[t._v("这时候就运行成功了")])]),t._v(" "),a("h4",{attrs:{id:"_2-3-zookeeper运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-zookeeper运行"}},[t._v("#")]),t._v(" 2.3 Zookeeper运行")]),t._v(" "),a("p",[a("strong",[t._v("依次")]),t._v(" 先打开 bin文件夹下的："),a("strong",[t._v("zkServer.cmd")]),t._v(" 、"),a("strong",[t._v("zkCli.cmd")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320123134.png",alt:"7"}}),t._v(" "),a("p",[t._v("这说明已经运行成功。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Zookeeper语句")])])]),t._v(" "),a("p",[t._v("1.查看现存有的文件夹")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" /\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("2.创建新文件夹")]),t._v(" "),a("p",[t._v("下方语句意思为：创建一个"),a("strong",[t._v("zc")]),t._v("文件夹，存值"),a("strong",[t._v("123")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("creste -e /zc "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("3.查看文件夹内容")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("get /zc\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320123516.png",alt:"8"}})]),t._v(" "),a("h2",{attrs:{id:"_3-安装dubbo-admin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装dubbo-admin"}},[t._v("#")]),t._v(" 3.安装dubbo-admin")]),t._v(" "),a("h4",{attrs:{id:"_3-1-下载项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-下载项目"}},[t._v("#")]),t._v(" 3.1 下载项目")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/apache/dubbo-admin",target:"_blank",rel:"noopener noreferrer"}},[t._v("dubbo-admin下载地址"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("注意")]),t._v("：记得更改该项目分支为"),a("strong",[t._v("master")]),t._v("再下载")]),t._v(" "),a("p",[t._v("下载好解压，在根目录下  "),a("strong",[t._v("dubbo-admin----src----main----resources文件夹")]),t._v("下的 "),a("strong",[t._v("application.properties")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320152439.png",alt:"9"}})]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("admin.registry.address")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("zookeeper://127.0.0.1:2181")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("此处就是"),a("strong",[t._v("注册中心地址")])]),t._v(" "),a("h4",{attrs:{id:"_3-2-打包项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-打包项目"}},[t._v("#")]),t._v(" 3.2 打包项目")]),t._v(" "),a("p",[t._v("在cmd命令指示框进入到根目录：")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mvn clean package -Dmaven.test.skip"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("第一次打包项目是挺慢的。")])]),t._v(" "),a("img",{staticStyle:{zoom:"90%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320164021.png",alt:"9"}}),t._v(" "),a("p",[t._v("这时候进入  "),a("strong",[t._v("dubbo-admin----target")]),t._v("，会出现jar包")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320164210.png",alt:"11"}})]),t._v(" "),a("h4",{attrs:{id:"_3-3-运行测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-运行测试"}},[t._v("#")]),t._v(" 3.3 运行测试")]),t._v(" "),a("p",[t._v("我们需要打开的网址为：http://localhost:7001/")]),t._v(" "),a("p",[t._v("cmd下，执行该语句，这时候会发现报错。")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("java -jar dubbo-admin-0. "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(". "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("-SNAPSHOT. jar\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("然后我们先启动Zookeeper服务器，在启动jar包")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320164633.png",alt:"12"}}),t._v(" "),a("p",[t._v("默认账号密码都是："),a("strong",[t._v("root")]),t._v("，输入就进入了。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/MoYu-zc/picgo/raw/master/img/20210320164712.png",alt:"13"}})]),t._v(" "),a("h2",{attrs:{id:"_4-小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-小结"}},[t._v("#")]),t._v(" 4.小结")]),t._v(" "),a("p",[a("strong",[t._v("zookeeper：注册中心")])]),t._v(" "),a("p",[a("strong",[t._v("dubbo-admin：是一个监控管理后台-查看我们注册了哪些服务，哪些服务被消费了")])]),t._v(" "),a("p",[a("strong",[t._v("Dubbo：jar包")])])])}),[],!1,null,null,null);e.default=s.exports}}]);